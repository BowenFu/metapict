#lang racket
; TODO: NOT DONE
;
; This module exports dc-path->curve, which converts a da-path oject
; to a curve (represented as a list of Bezier curves).
; This can be used to convert a text outline into a curve.

(require racket/draw "def.rkt")

(define (dc-path->curve dcp)
  (def dc (new record-dc%))
  (send dc draw-path dcp)
  (send dc get-recorded-datum))  ; TODO : Extract the Bezier curves from the draw-path element

(def dcp (new dc-path%))
(def default-font (make-object font%))
(send dcp text-outline default-font "Foo" 0 0 #f)
(dc-path->curve dcp)

#;(draw-path
 (( ((1.1171875 . 11.6015625)
     (1.1171875 . 2.9296875)
     (5.96484375 . 2.9296875)
     (5.96484375 . 3.8515625)
     (2.3515625 . 3.8515625)
     (2.3515625 . 6.7578125)
     (5.3828125 . 6.7578125)
     (5.3828125 . 7.6640625)
     (2.3515625 . 7.6640625)
     (2.3515625 . 11.6015625))
    
     ((9.64453125 . 11.75)
      #(8.734375 11.75 8.0078125 11.4453125)
      (7.46484375 . 10.84375)
      #(6.921875 10.23828125 6.6484375 9.4296875)
      (6.6484375 . 8.421875)
      #(6.6484375 7.3984375 6.921875 6.5859375)
      (7.46875 . 5.9921875)
      #(8.01171875 5.39453125 8.75 5.09765625)
      (9.6875 . 5.09765625)
      #(10.62109375 5.09765625 11.359375 5.39453125)
      (11.90234375 . 5.9921875)
      #(12.44921875 6.5859375 12.71875 7.390625)
      (12.71875 . 8.40625)
      #(12.71875 9.4453125 12.4453125 10.265625)
      (11.8984375 . 10.859375)
      #(11.3515625 11.453125 10.6015625 11.75)
      (9.64453125 . 11.75))
     
     ((9.6640625 . 10.8828125)
      #(10.88671875 10.8828125 11.49609375 10.0546875)
      (11.49609375 . 8.40625)
      #(11.49609375 6.77734375 10.890625 5.96484375)
      (9.6875 . 5.96484375)
      #(8.484375 5.96484375 7.8828125 6.78125)
      (7.8828125 . 8.421875)
      #(7.8828125 10.0625 8.4765625 10.8828125)
      (9.6640625 . 10.8828125))
     
     ((16.64453125 . 11.75)
      #(15.734375 11.75 15.0078125 11.4453125)
      (14.46484375 . 10.84375)
      #(13.921875 10.23828125 13.6484375 9.4296875)
      (13.6484375 . 8.421875)
      #(13.6484375 7.3984375 13.921875 6.5859375)
      (14.46875 . 5.9921875)
      #(15.01171875 5.39453125 15.75 5.09765625)
      (16.6875 . 5.09765625)
      #(17.62109375 5.09765625 18.359375 5.39453125)
      (18.90234375 . 5.9921875)
      #(19.44921875 6.5859375 19.71875 7.390625)
      (19.71875 . 8.40625)
      #(19.71875 9.4453125 19.4453125 10.265625)
      (18.8984375 . 10.859375)
      #(18.3515625 11.453125 17.6015625 11.75)
      (16.64453125 . 11.75))
     
     ((16.6640625 . 10.8828125)
      #(17.88671875 10.8828125 18.49609375 10.0546875)
      (18.49609375 . 8.40625)
      #(18.49609375 6.77734375 17.890625 5.96484375)
      (16.6875 . 5.96484375)
      #(15.484375 5.96484375 14.8828125 6.78125)
      (14.8828125 . 8.421875)
      #(14.8828125 10.0625 15.4765625 10.8828125)
      (16.6640625 . 10.8828125))
     
     ((13.0 . 11.6015625))
     )))